{{ 'pp-landing-section.css' | asset_url | stylesheet_tag }}

{%  liquid
  assign title_array = sectionData.title | split: " "
  assign idSuffix = "now" | date: "%N"
  assign id = "PP-Landing-Section-" | append: idSuffix
 %}

{% style %}
  {% if title_array.size == 3 %}
    #{{ id }} h2 > span:nth-child(2) {
      position: absolute;
      left: 50vw;
    }
  {% endif %}
  #{{ id }} .pp-landing-section-image-container img {
    width: {{ 100 | divided_by: sectionData.sectionMedia.size }}%;
  }
{% endstyle %}

<div class="pp-landing-section" id="{{ id }}">
  <h2>
    {% for item in title_array %}
      <span>{{ item }}</span>
    {% endfor %}
  </h2>
  <div class="pp-landing-section-image-container">
      {% for s in sectionData.sectionMedia -%}
        {% if s.mediaType == 'image' %}
          <img src="{{ s.image.filename | file_url  }}">
        {% endif %}
      {% endfor %}
  </div>
  <div class="pp-landing-section-text-container">
    <p>
      {{ sectionData.caption }}
    </p>
    <div>
      {% if sectionData.ctaType == 'buyNow' %}
        {% for product in collections.all.products %}
          {% assign productId = product.id | prepend: 'shopifyProduct-' %}
          {% if productId == sectionData.product._ref %}
            {% render 'pp-buy-button', product: product %}
          {% endif %}
        {% endfor %}
      {% else %}
      <button class="pp-button">
        <a href="pages/{{ sectionData.navigation }}">READ MORE</a>
      </button>
      {% endif %}
    </div>
</div>
