{{ 'patinapatina-newsletter.css' | asset_url | stylesheet_tag }}


{% style %}
  .patinapatina-newsletter {
    background-image: url('{{ 'Newsletter.png' | file_url }}');
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
  }

  .patinapatina-newsletter h2,
  .patinapatina-newsletter p,
  button.patinapatina-button {
    color: {{ section.settings.text_color }};
  }

  .patinapatina-newsletter-form-email {
    background-color: {{ section.settings.text_color }};
  }

  .patinapatina-newsletter button.patinapatina-button:hover {
    background-color: {{ section.settings.text_color }};
    border-color: {{ section.settings.text_color }};
  }

  .patinapatina-newsletter button.patinapatina-button:hover {
    color: {{ section.settings.background_color }};
  }

{% endstyle %}

<div class="patinapatina-newsletter">
  <div class="patinapatina-newsletter-inner">
    <h2>Join our newsletter!</h2>
    <p>Our monthly letter revisits topics from past PATINAPATINA issues and places them into the context of current events.</p>
    <div class="patinapatina-newsletter-form-wrapper">
      {% form 'customer' %}
        <input
          type="hidden"
          name="contact[tags]"
          value="newsletter">
        <div class="patinapatina-newsletter-form-field-wrapper">
          <input
            id="NewsletterForm--{{ section.id }}"
            type="email"
            aria-label="Email"
            name="contact[email]"
            class="patinapatina-newsletter-form-email"
            value="{{ form.email }}"
            aria-required="true"
            autocorrect="off"
            autocapitalize="off"
            autocomplete="email"
            {% if form.errors %}
            autofocus
            aria-invalid="true"
            aria-describedby="Newsletter-error--{{ section.id }}"
            {% elsif form.posted_successfully? %}
            aria-describedby="Newsletter-success--{{ section.id }}"
            {% endif %}
            required>
          <button
            type="submit"
            class="patinapatina-button"
            name="commit"
            aria-label="{{ 'newsletter.button_label' | t }}">
            SIGN UP
          </button>
          {%- if form.errors -%}
            <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
              <span class="svg-wrapper">
                {{- 'icon-error.svg' | inline_asset_content -}}
              </span>
              {{- form.errors.translated_fields.email | capitalize }}
              {{ form.errors.messages.email -}}
            </small>
          {%- endif -%}
        </div>
        {%- if form.posted_successfully? -%}
          <h3
            class="newsletter-form__message newsletter-form__message--success form__message"
            id="Newsletter-success--{{ section.id }}"
            tabindex="-1"
            autofocus>
            <span class="svg-wrapper">
              {{- 'icon-success.svg' | inline_asset_content -}}
            </span>
            {{- 'newsletter.success' | t }}
          </h3>
        {%- endif -%}
      {% endform %}
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "PatinaPatina Newsletter",
    "tag": "section",
    "class": "section",
    "disabled_on": {
      "groups": ["header", "footer"]
    },
    "settings": [
      {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#141414"
      }, {
        "type": "color",
        "id": "text_color",
        "label": "Text Color",
        "default": "#FFFBF3"
      }
    ],
    "blocks": [],
    "presets": [
      {
        "name": "patinapatina-newsletter"
      }
    ]
  }
{% endschema %}